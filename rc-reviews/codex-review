Muad'Dib Codex Review

Findings (ordered by severity)
- Hooks incomplete vs plan: Phase 4 claims “all 8 hook types” (progress.md:233-240,247) but the settings template only wires 5 events (PreToolUse, PostToolUse, SessionStart, Stop, PreCompact) with no PostCompact/PreSubagent/PostSubagent coverage (templates/settings.json.hbs:4-65). Planned hook coverage and documented parity are overstated, and related hooks never fire. Implement the missing hook types (or revise the exit criteria/docs) and extend tests to assert the full 8-event matrix.
- Status sources conflict: progress.md lists Phase 5 as “Not Started” in the status table (progress.md:7-14) yet marks Phases 4 and 5 complete with 100% overall progress, mismatched dates, and test counts later in the file (progress.md:207-352). CLAUDE.md still says the current phase is “Pre-Phase 4 Remediation” with 38 tests (CLAUDE.md:83-169,191) and “Next Phase: Phase 4.” The supposed source of truth is contradictory, making it unclear what remains to be done. Reconcile the phase/state/test-count data across progress.md and CLAUDE.md and align the change log with the actual state.
- Tests require a watchman workaround: the default test script uses Jest’s watchman integration (package.json:43) and fails in this environment with “unable to talk to your watchman” until `--watchman=false` is passed. Out-of-the-box `npm test` exits with an error, which undermines the claimed green suite. Update the npm script to disable watchman (e.g., add `--watchman=false` or set `JEST_USE_WATCHMAN=false`) and note the expected test count (53) in docs.
- Settings update is non-additive within hook types: the project updater only adds entirely new hook types and preserves existing ones as-is (src/cli/update.js:120-166). If a release adds new entries inside an existing hook type (e.g., another PreToolUse command), existing projects won’t pick it up via `muaddib update --project` despite progress notes claiming new hooks propagate. Consider merging hook arrays (with dedup) or explicitly documenting that updates requiring hook changes need a re-init.

Tests
- npm test — failed (watchman socket permission error; requires watchman disabled)
- npm test -- --watchman=false — passed (3 suites, 53 tests)
